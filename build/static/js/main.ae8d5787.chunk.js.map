{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","result","data","newRecord","post","id","delete","changedRecord","put","Notification","message","style","error","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","text","Filter","filter","handleFilterChange","value","onChange","Record","record","handleDelete","name","number","onClick","Records","records","makeDeleteHandler","map","key","PersonForm","newName","handleNameChange","newNumber","handleNumberChange","addRecord","type","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","setMessage","useEffect","console","log","personService","length","shownPersons","p","toLowerCase","includes","showNotification","msg","setTimeout","showError","showMessage","event","target","preventDefault","rec","window","confirm","find","changedRec","returnedRecord","catch","concat","response","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ae8d5787.chunk.js","sourcesContent":["import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n    return axios.get(baseUrl).then(result => result.data);\n};\n\nconst create = (newRecord) => {\n    return axios.post(baseUrl, newRecord).then(result => result.data);\n};\n\nconst del = (id) => {\n    return axios.delete(`${baseUrl}/${id}`);\n};\n\nconst update = (id, changedRecord) => {\n    return axios.put(`${baseUrl}/${id}`, changedRecord).then(result => result.data);\n};\n\nexport default { getAll, create, del, update };\n","import React, { useState, useEffect } from 'react';\nimport personService from './services/persons.js';\n\nconst Notification = ({ message }) => {\n    if (message === null )\n        return null;\n\n    const errorStyle = {\n        color: 'red',\n        background: 'lightgrey',\n        fontSize: '20px',\n        borderStyle: 'solid',\n        borderRadius: '5px',\n        padding: '10px',\n        marginBottom: '10px',\n    };\n\n    const messageStyle = {\n        color: 'green',\n        background: 'lightgrey',\n        fontSize: '20px',\n        borderStyle: 'solid',\n        borderRadius: '5px',\n        padding: '10px',\n        marginBottom: '10px',\n    };\n\n    return (\n        <div style={message.error ? errorStyle : messageStyle}>\n            {message.text}\n        </div>\n    );\n};\n\nconst Filter = ({filter, handleFilterChange}) => {\n    return (\n        <div>\n            filter shown with\n            <input value={filter} onChange={handleFilterChange} />\n        </div>\n    );\n};\n\nconst Record = ({record, handleDelete}) => {\n    return (\n        <div>\n            {record.name} {record.number}\n            <button onClick={handleDelete}>delete</button>\n        </div>\n    );\n};\n\nconst Records = ({records, makeDeleteHandler}) => {\n    return (\n        <div>\n            {records.map(record =>\n                <Record\n                    key={record.name}\n                    record={record}\n                    handleDelete={makeDeleteHandler(record.id, record.name)}\n                />\n            )}\n        </div>\n    );\n};\n\nconst PersonForm =\n    ({newName, handleNameChange, newNumber, handleNumberChange, addRecord}) => {\n    return (\n        <form>\n            <div>\n                name: <input value={newName} onChange={handleNameChange} />\n            </div>\n            <div>\n                number: <input value={newNumber} onChange={handleNumberChange} />\n            </div>\n            <div>\n                <button type=\"submit\" onClick={addRecord}>add</button>\n            </div>\n        </form>\n    );\n};\n\nconst App = () => {\n    const [ persons, setPersons ] = useState([]);\n    const [ newName, setNewName ] = useState('');\n    const [ newNumber, setNewNumber ] = useState('');\n    const [ filter, setFilter ] = useState('');\n    const [ message, setMessage ] = useState(null);\n\n    useEffect(() => {\n        console.log('in effect');\n        personService\n            .getAll()\n            .then(data => {\n                console.log('got persons');\n                setPersons(data);\n            });\n    }, []);\n    console.log(persons.length, 'persons');\n\n    const addRecord = (event) => {\n        event.preventDefault();\n\n        if (persons.map(rec => rec.name).includes(newName)) {\n            if (window.confirm(`${newName} is already added to the phonebook. `\n                + 'Replace the old number with a new one?')) {\n                const record = persons.find(p => p.name === newName);\n                const changedRec = { ...record, number: newNumber };\n                const id = changedRec.id;\n\n                personService\n                    .update(id, changedRec)\n                    .then(returnedRecord => {\n                        console.log('replaced, new ', returnedRecord);\n                        showMessage(`Updated the number of ${returnedRecord.name}`);\n                    })\n                    .catch(error => showError(\n                        `Information of ${record.name} has already been removed`));\n\n                setPersons(persons.map(p => p.id !== id ? p : changedRec));\n                setNewName('');\n                setNewNumber('');\n            }\n        } else {\n            const newRecord = { name: newName, number: newNumber };\n\n            personService\n                .create(newRecord)\n                .then(returnedRecord => {\n                    console.log('added', returnedRecord);\n                    setPersons(persons.concat(returnedRecord));\n                    showMessage(`Added ${returnedRecord.name}`);\n                });\n            setNewName('');\n            setNewNumber('');\n        }\n    };\n\n    const handleNameChange = (event) => {\n        setNewName(event.target.value);\n    };\n\n    const handleNumberChange = (event) => {\n        setNewNumber(event.target.value);\n    };\n\n    const handleFilterChange = (event) => {\n        setFilter(event.target.value);\n    };\n\n    const makeDeleteHandler = (id, name) => {\n        return () => {\n            if (window.confirm(`Delete ${name} ?`)) {\n                personService\n                    .del(id)\n                    .then(response => {\n                        console.log(`Deleted ${name} from db`);\n                        showMessage(`Deleted ${name}`);\n                    })\n                    // double deleting doesn't get caught but goes straight to\n                    // console with 'req failed 404' for whatever reason..\n                    .catch(error => console.log(error));\n\n                setPersons(persons.filter(p => p.id !== id));\n            }\n        };\n    };\n\n    // just filter according to names\n    const shownPersons = persons.filter(p =>\n        p.name.toLowerCase().includes(filter.toLowerCase())\n    );\n\n    const showNotification = (msg) => {\n        setMessage(msg);\n        setTimeout(() => setMessage(null), 5000);\n    };\n\n    const showError = (text) => showNotification({text: text, error: true});\n    const showMessage = (text) => showNotification({text: text, error: false});\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification message={message} />\n            <Filter filter={filter} handleFilterChange={handleFilterChange} />\n            <h3>Add new contact</h3>\n            <PersonForm newName={newName}\n                        handleNameChange={handleNameChange}\n                        newNumber={newNumber}\n                        handleNumberChange={handleNumberChange}\n                        addRecord={addRecord}\n            />\n            <h3>Numbers</h3>\n            <Records records={shownPersons} makeDeleteHandler={makeDeleteHandler} />\n        </div>\n    );\n\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}